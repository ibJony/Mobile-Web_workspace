$(document).ready(function() {
	keyboardLanguage = "ru";
	interceptKey = $("#interceptKey").is(":checked")
	textareaFontSize = 14;
	textareaLineHeight = 18;
	characterCase = 0;
	atLeastOneLayoutIsChosen = false;
	for (k=0; k<$("form input:radio").length; k++){
		if ($("form input:radio")[k].checked == true) {
			layout = k;
			atLeastOneLayoutIsChosen = true;
		}
	}
	if (atLeastOneLayoutIsChosen == false) {
		$("form input:radio")[0].checked = true;
		layout = 0;
	}
	standardLayoutLower = "<div class='keyboard_holder'><div class='keyboard_russian_left'><div class='keyboard_russian_row_1'><input id='char_192' type='button' class='letter_russian' value='&euml;' onmousedown='manageChar(this)' onmouseup='refocus()' /><input id='char_49' type='button' class='letter_russian' value='1' onmousedown='manageChar(this)' onmouseup='refocus()' /><input id='char_50' type='button' class='letter_russian' value='2' onmousedown='manageChar(this)' onmouseup='refocus()' /><input id='char_51' type='button' class='letter_russian' value='3' onmousedown='manageChar(this)' onmouseup='refocus()' /><input id='char_52' type='button' class='letter_russian' value='4' onmousedown='manageChar(this)' onmouseup='refocus()' /><input id='char_53' type='button' class='letter_russian' value='5' onmousedown='manageChar(this)' onmouseup='refocus()' /><input id='char_54' type='button' class='letter_russian' value='6' onmousedown='manageChar(this)' onmouseup='refocus()' /><input id='char_55' type='button' class='letter_russian' value='7' onmousedown='manageChar(this)' onmouseup='refocus()' /><input id='char_56' type='button' class='letter_russian' value='8' onmousedown='manageChar(this)' onmouseup='refocus()' /><input id='char_57' type='button' class='letter_russian' value='9' onmousedown='manageChar(this)' onmouseup='refocus()' /><input id='char_48' type='button' class='letter_russian' value='0' onmousedown='manageChar(this)' onmouseup='refocus()' /><input id='char_173' type='button' class='letter_russian' value='-' onmousedown='manageChar(this)' onmouseup='refocus()' /><input id='char_61' type='button' class='letter_russian' value='=' onmousedown='manageChar(this)' onmouseup='refocus()' /></div><div class='keyboard_russian_row_2'><input id='char_81' type='button' class='letter_russian' value='&#1081;' onmousedown='manageChar(this)' onmouseup='refocus()' /><input id='char_87' type='button' class='letter_russian' value='&#1094;' onmousedown='manageChar(this)' onmouseup='refocus()' /><input id='char_69' type='button' class='letter_russian' value='&#1091;' onmousedown='manageChar(this)' onmouseup='refocus()' /><input id='char_82' type='button' class='letter_russian' value='&#1082;' onmousedown='manageChar(this)' onmouseup='refocus()' /><input id='char_84' type='button' class='letter_russian' value='&#1077;' onmousedown='manageChar(this)' onmouseup='refocus()' /><input id='char_89' type='button' class='letter_russian' value='&#1085;' onmousedown='manageChar(this)' onmouseup='refocus()' /><input id='char_85' type='button' class='letter_russian' value='&#1075;' onmousedown='manageChar(this)' onmouseup='refocus()' /><input id='char_73' type='button' class='letter_russian' value='&#1096;' onmousedown='manageChar(this)' onmouseup='refocus()' /><input id='char_79' type='button' class='letter_russian' value='&#1097;' onmousedown='manageChar(this)' onmouseup='refocus()' /><input id='char_80' type='button' class='letter_russian' value='&#1079;' onmousedown='manageChar(this)' onmouseup='refocus()' /><input id='char_160' type='button' class='letter_russian' value='&#1093;' onmousedown='manageChar(this)' onmouseup='refocus()' /><input id='char_221' type='button' class='letter_russian' value='&#1098;' onmousedown='manageChar(this)' onmouseup='refocus()' /><input id='char_220' type='button' class='letter_russian' value='&#92;' onmousedown='manageChar(this)'  onmouseup='refocus()' /></div><div class='keyboard_russian_row_3'><input id='char_65' type='button' class='letter_russian' value='&#1092;' onmousedown='manageChar(this)' onmouseup='refocus()' /><input id='char_83' type='button' class='letter_russian' value='&#1099;' onmousedown='manageChar(this)' onmouseup='refocus()' /><input id='char_68' type='button' class='letter_russian' value='&#1074;' onmousedown='manageChar(this)' onmouseup='refocus()' /><input id='char_70' type='button' class='letter_russian' value='&#1072;' onmousedown='manageChar(this)' onmouseup='refocus()' /><input id='char_71' type='button' class='letter_russian' value='&#1087;' onmousedown='manageChar(this)' onmouseup='refocus()' /><input id='char_72' type='button' class='letter_russian' value='&#1088;' onmousedown='manageChar(this)' onmouseup='refocus()' /><input id='char_74' type='button' class='letter_russian' value='&#1086;' onmousedown='manageChar(this)' onmouseup='refocus()' /><input id='char_75' type='button' class='letter_russian' value='&#1083;' onmousedown='manageChar(this)' onmouseup='refocus()' /><input id='char_76' type='button' class='letter_russian' value='&#1076;' onmousedown='manageChar(this)' onmouseup='refocus()' /><input id='char_59' type='button' class='letter_russian' value='&#1078;' onmousedown='manageChar(this)' onmouseup='refocus()' /><input id='char_222' type='button' class='letter_russian' value='&#1101;' onmousedown='manageChar(this)' onmouseup='refocus()' /><input type='button' class='letter_russian' value='!' onmousedown='manageChar(this)' onmouseup='refocus()' /></div><div class='keyboard_russian_row_4'><input id='char_90' type='button' class='letter_russian' value='&#1103;' onmousedown='manageChar(this)' onmouseup='refocus()' /><input id='char_88' type='button' class='letter_russian' value='&#1095;' onmousedown='manageChar(this)' onmouseup='refocus()' /><input id='char_67' type='button' class='letter_russian' value='&#1089;' onmousedown='manageChar(this)' onmouseup='refocus()' /><input id='char_86' type='button' class='letter_russian' value='&#1084;' onmousedown='manageChar(this)' onmouseup='refocus()' /><input id='char_66' type='button' class='letter_russian' value='&#1080;' onmousedown='manageChar(this)' onmouseup='refocus()' /><input id='char_78' type='button' class='letter_russian' value='&#1090;' onmousedown='manageChar(this)' onmouseup='refocus()' /><input id='char_77' type='button' class='letter_russian' value='&#1100;' onmousedown='manageChar(this)' onmouseup='refocus()' /><input id='char_188' type='button' class='letter_russian' value='&#1073;' onmousedown='manageChar(this)'  onmouseup='refocus()' /><input id='char_190' type='button' class='letter_russian' value='&#1102;' onmousedown='manageChar(this)' onmouseup='refocus()' /><input id='char_191' type='button' class='letter_russian' value='.' onmousedown='manageChar(this)' onmouseup='refocus()' /><input type='button' class='letter_russian' value=',' onmousedown='manageChar(this)'  onmouseup='refocus()' /><input type='button' class='letter_russian' value='?' onmousedown='manageChar(this)' onmouseup='refocus()' /></div></div><div class='keyboard_russian_right'><input type='button' class='letter_text_big_right' value='Backspace' onmousedown='manageBackspace()' onmouseup='refocus()' /><br /><input type='button' class='letter_text_big_right' value='Enter' onmousedown='manageEnter()' onmouseup='refocus()' /><br /><input type='button' class='letter_text_big_right' id='btn_caps' value='Caps Lock' onmousedown='manageCaps()'  onmouseup='refocus()' /><br /><input type='button' class='letter_text_big_right' value='Space Bar' onmousedown='manageSpace()' onmouseup='refocus()' /><br /></div></div>";
	standardLayoutUpper = "<div class='keyboard_holder'><div class='keyboard_russian_left'><div class='keyboard_russian_row_1'><input id='char_192' type='button' class='letter_russian' value='&Euml;' onmousedown='manageChar(this)' onmouseup='refocus()' /><input id='char_49' type='button' class='letter_russian' value='!' onmousedown='manageChar(this)' onmouseup='refocus()' /><input id='char_50' type='button' class='letter_russian' value='&quot;' onmousedown='manageChar(this)' onmouseup='refocus()' /><input id='char_51' type='button' class='letter_russian' value='&#8470;' onmousedown='manageChar(this)' onmouseup='refocus()' /><input id='char_52' type='button' class='letter_russian' value=';' onmousedown='manageChar(this)' onmouseup='refocus()' /><input id='char_53' type='button' class='letter_russian' value='%' onmousedown='manageChar(this)' onmouseup='refocus()' /><input id='char_54' type='button' class='letter_russian' value=':' onmousedown='manageChar(this)' onmouseup='refocus()' /><input id='char_55' type='button' class='letter_russian' value='?' onmousedown='manageChar(this)' onmouseup='refocus()' /><input id='char_56' type='button' class='letter_russian' value='*' onmousedown='manageChar(this)' onmouseup='refocus()' /><input id='char_57' type='button' class='letter_russian' value='(' onmousedown='manageChar(this)' onmouseup='refocus()' /><input id='char_48' type='button' class='letter_russian' value=')' onmousedown='manageChar(this)' onmouseup='refocus()' /><input id='char_173' type='button' class='letter_russian' value='_' onmousedown='manageChar(this)' onmouseup='refocus()' /><input id='char_61' type='button' class='letter_russian' value='+' onmousedown='manageChar(this)' onmouseup='refocus()' /></div><div class='keyboard_russian_row_2'><input id='char_81' type='button' class='letter_russian' value='&#1049;' onmousedown='manageChar(this)' onmouseup='refocus()' /><input id='char_87' type='button' class='letter_russian' value='&#1062;' onmousedown='manageChar(this)' onmouseup='refocus()' /><input id='char_69' type='button' class='letter_russian' value='&#1059;' onmousedown='manageChar(this)' onmouseup='refocus()' /><input id='char_82' type='button' class='letter_russian' value='&#1050;' onmousedown='manageChar(this)' onmouseup='refocus()' /><input id='char_84' type='button' class='letter_russian' value='&#1045;' onmousedown='manageChar(this)' onmouseup='refocus()' /><input id='char_89' type='button' class='letter_russian' value='&#1053;' onmousedown='manageChar(this)' onmouseup='refocus()' /><input id='char_85' type='button' class='letter_russian' value='&#1043;' onmousedown='manageChar(this)' onmouseup='refocus()' /><input id='char_73' type='button' class='letter_russian' value='&#1064;' onmousedown='manageChar(this)' onmouseup='refocus()' /><input id='char_79' type='button' class='letter_russian' value='&#1065;' onmousedown='manageChar(this)' onmouseup='refocus()' /><input id='char_80' type='button' class='letter_russian' value='&#1047;' onmousedown='manageChar(this)' onmouseup='refocus()' /><input id='char_160' type='button' class='letter_russian' value='&#1061;' onmousedown='manageChar(this)' onmouseup='refocus()' /><input id='char_221' type='button' class='letter_russian' value='&#1066;' onmousedown='manageChar(this)' onmouseup='refocus()' /><input id='char_220' type='button' class='letter_russian' value='/' onmousedown='manageChar(this)' onmouseup='refocus()' /></div><div class='keyboard_russian_row_3'><input id='char_65' type='button' class='letter_russian' value='&#1060;' onmousedown='manageChar(this)' onmouseup='refocus()' /><input id='char_83' type='button' class='letter_russian' value='&#1067;' onmousedown='manageChar(this)' onmouseup='refocus()' /><input id='char_68' type='button' class='letter_russian' value='&#1042;' onmousedown='manageChar(this)' onmouseup='refocus()' /><input id='char_70' type='button' class='letter_russian' value='&#1040;' onmousedown='manageChar(this)' onmouseup='refocus()' /><input id='char_71' type='button' class='letter_russian' value='&#1055;' onmousedown='manageChar(this)' onmouseup='refocus()' /><input id='char_72' type='button' class='letter_russian' value='&#1056;' onmousedown='manageChar(this)' onmouseup='refocus()' /><input id='char_74' type='button' class='letter_russian' value='&#1054;' onmousedown='manageChar(this)' onmouseup='refocus()' /><input id='char_75' type='button' class='letter_russian' value='&#1051;' onmousedown='manageChar(this)' onmouseup='refocus()' /><input id='char_76' type='button' class='letter_russian' value='&#1044;' onmousedown='manageChar(this)' onmouseup='refocus()' /><input id='char_59' type='button' class='letter_russian' value='&#1046;' onmousedown='manageChar(this)' onmouseup='refocus()' /><input id='char_222' type='button' class='letter_russian' value='&#1069;' onmousedown='manageChar(this)' onmouseup='refocus()' /><input type='button' class='letter_russian' value='[' onmousedown='manageChar(this)'  onmouseup='refocus()' /></div><div class='keyboard_russian_row_4'><input id='char_90' type='button' class='letter_russian' value='&#1071;' onmousedown='manageChar(this)' onmouseup='refocus()' /><input id='char_88' type='button' class='letter_russian' value='&#1063;' onmousedown='manageChar(this)' onmouseup='refocus()' /><input id='char_67' type='button' class='letter_russian' value='&#1057;' onmousedown='manageChar(this)' onmouseup='refocus()' /><input id='char_86' type='button' class='letter_russian' value='&#1052;' onmousedown='manageChar(this)' onmouseup='refocus()' /><input id='char_66' type='button' class='letter_russian' value='&#1048;' onmousedown='manageChar(this)' onmouseup='refocus()' /><input id='char_78' type='button' class='letter_russian' value='&#1058;' onmousedown='manageChar(this)' onmouseup='refocus()' /><input id='char_77' type='button' class='letter_russian' value='&#1068;' onmousedown='manageChar(this)' onmouseup='refocus()' /><input id='char_188' type='button' class='letter_russian' value='&#1041;' onmousedown='manageChar(this)' onmouseup='refocus()' /><input id='char_190' type='button' class='letter_russian' value='&#1070;' onmousedown='manageChar(this)' onmouseup='refocus()' /><input id='char_191' type='button' class='letter_russian' value=',' onmousedown='manageChar(this)' onmouseup='refocus()' /><input type='button' class='letter_russian' value='@' onmousedown='manageChar(this)' onmouseup='refocus()' /><input type='button' class='letter_russian' value=']' onmousedown='manageChar(this)' onmouseup='refocus()' /></div></div><div class='keyboard_russian_right'><input type='button' class='letter_text_big_right' value='Backspace' onmousedown='manageBackspace()' onmouseup='refocus()' /><br /><input type='button' class='letter_text_big_right' value='Enter' onmousedown='manageEnter()' onmouseup='refocus()' /><br /><input type='button' class='letter_text_big_right' id='btn_caps' value='Caps Lock' onmousedown='manageCaps()'  onmouseup='refocus()' /><br /><input type='button' class='letter_text_big_right' value='Space Bar' onmousedown='manageSpace()' onmouseup='refocus()' /><br /></div></div>";
	phoneticLayoutLower = "<div class='keyboard_holder'><div class='keyboard_russian_left'><div class='keyboard_russian_row_1'><input id='char_192' type='button' class='letter_russian' value='&#1102;' onmousedown='manageChar(this)' onmouseup='refocus()' /><input id='char_49' type='button' class='letter_russian' value='1' onmousedown='manageChar(this)' onmouseup='refocus()' /><input id='char_50' type='button' class='letter_russian' value='2' onmousedown='manageChar(this)' onmouseup='refocus()' /><input id='char_51' type='button' class='letter_russian' value='3' onmousedown='manageChar(this)' onmouseup='refocus()' /><input id='char_52' type='button' class='letter_russian' value='4' onmousedown='manageChar(this)' onmouseup='refocus()' /><input id='char_53' type='button' class='letter_russian' value='5' onmousedown='manageChar(this)' onmouseup='refocus()' /><input id='char_54' type='button' class='letter_russian' value='6' onmousedown='manageChar(this)' onmouseup='refocus()' /><input id='char_55' type='button' class='letter_russian' value='7' onmousedown='manageChar(this)' onmouseup='refocus()' /><input id='char_56' type='button' class='letter_russian' value='8' onmousedown='manageChar(this)' onmouseup='refocus()' /><input id='char_57' type='button' class='letter_russian' value='9' onmousedown='manageChar(this)' onmouseup='refocus()' /><input id='char_48' type='button' class='letter_russian' value='0' onmousedown='manageChar(this)' onmouseup='refocus()' /><input id='char_173' type='button' class='letter_russian' value='-' onmousedown='manageChar(this)' onmouseup='refocus()' /><input id='char_61' type='button' class='letter_russian' value='&#1100;' onmousedown='manageChar(this)' onmouseup='refocus()' /></div><div class='keyboard_russian_row_2'><input id='char_81' type='button' class='letter_russian' value='&#1103;' onmousedown='manageChar(this)' onmouseup='refocus()' /><input id='char_87' type='button' class='letter_russian' value='&#1074;' onmousedown='manageChar(this)' onmouseup='refocus()' /><input id='char_69' type='button' class='letter_russian' value='&#1077;' onmousedown='manageChar(this)' onmouseup='refocus()' /><input id='char_82' type='button' class='letter_russian' value='&#1088;' onmousedown='manageChar(this)' onmouseup='refocus()' /><input id='char_84' type='button' class='letter_russian' value='&#1090;' onmousedown='manageChar(this)' onmouseup='refocus()' /><input id='char_89' type='button' class='letter_russian' value='&#1099;' onmousedown='manageChar(this)' onmouseup='refocus()' /><input id='char_85' type='button' class='letter_russian' value='&#1091;' onmousedown='manageChar(this)' onmouseup='refocus()' /><input id='char_73' type='button' class='letter_russian' value='&#1080;' onmousedown='manageChar(this)' onmouseup='refocus()' /><input id='char_79' type='button' class='letter_russian' value='&#1086;' onmousedown='manageChar(this)' onmouseup='refocus()' /><input id='char_80' type='button' class='letter_russian' value='&#1087;' onmousedown='manageChar(this)' onmouseup='refocus()' /><input id='char_160' type='button' class='letter_russian' value='&#1096;' onmousedown='manageChar(this)' onmouseup='refocus()' /><input id='char_221' type='button' class='letter_russian' value='&#1097;' onmousedown='manageChar(this)' onmouseup='refocus()' /><input id='char_220' type='button' class='letter_russian' value='&#1101;' onmousedown='manageChar(this)' onmouseup='refocus()' /></div><div class='keyboard_russian_row_3'><input id='char_65' type='button' class='letter_russian' value='&#1072;' onmousedown='manageChar(this)' onmouseup='refocus()' /><input id='char_83' type='button' class='letter_russian' value='&#1089;' onmousedown='manageChar(this)' onmouseup='refocus()' /><input id='char_68' type='button' class='letter_russian' value='&#1076;' onmousedown='manageChar(this)' onmouseup='refocus()' /><input id='char_70' type='button' class='letter_russian' value='&#1092;' onmousedown='manageChar(this)' onmouseup='refocus()' /><input id='char_71' type='button' class='letter_russian' value='&#1075;' onmousedown='manageChar(this)' onmouseup='refocus()' /><input id='char_72' type='button' class='letter_russian' value='&#1095;' onmousedown='manageChar(this)' onmouseup='refocus()' /><input id='char_74' type='button' class='letter_russian' value='&#1081;' onmousedown='manageChar(this)' onmouseup='refocus()' /><input id='char_75' type='button' class='letter_russian' value='&#1082;' onmousedown='manageChar(this)' onmouseup='refocus()' /><input id='char_76' type='button' class='letter_russian' value='&#1083;' onmousedown='manageChar(this)' onmouseup='refocus()' /><input id='char_59' type='button' class='letter_russian' value=';' onmousedown='manageChar(this)' onmouseup='refocus()' /><input id='char_222' type='button' class='letter_russian' value='&#39;' onmousedown='manageChar(this)' onmouseup='refocus()' /></div><div class='keyboard_russian_row_4'><input id='char_90' type='button' class='letter_russian' value='&#1079;' onmousedown='manageChar(this)' onmouseup='refocus()' /><input id='char_88' type='button' class='letter_russian' value='&#1093;' onmousedown='manageChar(this)' onmouseup='refocus()' /><input id='char_67' type='button' class='letter_russian' value='&#1094;' onmousedown='manageChar(this)' onmouseup='refocus()' /><input id='char_86' type='button' class='letter_russian' value='&#1078;' onmousedown='manageChar(this)' onmouseup='refocus()' /><input id='char_66' type='button' class='letter_russian' value='&#1073;' onmousedown='manageChar(this)' onmouseup='refocus()' /><input id='char_78' type='button' class='letter_russian' value='&#1085;' onmousedown='manageChar(this)' onmouseup='refocus()' /><input id='char_77' type='button' class='letter_russian' value='&#1084;' onmousedown='manageChar(this)' onmouseup='refocus()' /><input id='char_188' type='button' class='letter_russian' value=',' onmousedown='manageChar(this)'  onmouseup='refocus()' /><input id='char_190' type='button' class='letter_russian' value='.' onmousedown='manageChar(this)' onmouseup='refocus()' /><input id='char_191' type='button' class='letter_russian' value='/' onmousedown='manageChar(this)' onmouseup='refocus()' /><input type='button' class='letter_russian' value='!' onmousedown='manageChar(this)' onmouseup='refocus()' /></div></div><div class='keyboard_russian_right'><input type='button' class='letter_text_big_right' value='Backspace' onmousedown='manageBackspace()' onmouseup='refocus()' /><br /><input type='button' class='letter_text_big_right' value='Enter' onmousedown='manageEnter()' onmouseup='refocus()' /><br /><input type='button' class='letter_text_big_right' id='btn_caps' value='Caps Lock' onmousedown='manageCaps()'  onmouseup='refocus()' /><br /><input type='button' class='letter_text_big_right' value='Space Bar' onmousedown='manageSpace()' onmouseup='refocus()' /><br /></div></div>";
	phoneticLayoutUpper = "<div class='keyboard_holder'><div class='keyboard_russian_left'><div class='keyboard_russian_row_1'><input id='char_192' type='button' class='letter_russian' value='&#1070;' onmousedown='manageChar(this)' onmouseup='refocus()' /><input id='char_49' type='button' class='letter_russian' value='!' onmousedown='manageChar(this)' onmouseup='refocus()' /><input id='char_50' type='button' class='letter_russian' value='&#1098; ' onmousedown='manageChar(this)' onmouseup='refocus()' /><input id='char_51' type='button' class='letter_russian' value='&#1066;' onmousedown='manageChar(this)' onmouseup='refocus()' /><input id='char_52' type='button' class='letter_russian' value='$' onmousedown='manageChar(this)' onmouseup='refocus()' /><input id='char_53' type='button' class='letter_russian' value='%' onmousedown='manageChar(this)' onmouseup='refocus()' /><input id='char_54' type='button' class='letter_russian' value='&euml;' onmousedown='manageChar(this)' onmouseup='refocus()' /><input id='char_55' type='button' class='letter_russian' value='&Euml;' onmousedown='manageChar(this)' onmouseup='refocus()' /><input id='char_56' type='button' class='letter_russian' value='*' onmousedown='manageChar(this)' onmouseup='refocus()' /><input id='char_57' type='button' class='letter_russian' value='(' onmousedown='manageChar(this)' onmouseup='refocus()' /><input id='char_48' type='button' class='letter_russian' value=')' onmousedown='manageChar(this)' onmouseup='refocus()' /><input id='char_173' type='button' class='letter_russian' value='_' onmousedown='manageChar(this)' onmouseup='refocus()' /><input id='char_61' type='button' class='letter_russian' value='&#1068;' onmousedown='manageChar(this)' onmouseup='refocus()' /></div><div class='keyboard_russian_row_2'><input id='char_81' type='button' class='letter_russian' value='&#1071;' onmousedown='manageChar(this)' onmouseup='refocus()' /><input id='char_87' type='button' class='letter_russian' value='&#1042;' onmousedown='manageChar(this)' onmouseup='refocus()' /><input id='char_69' type='button' class='letter_russian' value='&#1045;' onmousedown='manageChar(this)' onmouseup='refocus()' /><input id='char_82' type='button' class='letter_russian' value='&#1056;' onmousedown='manageChar(this)' onmouseup='refocus()' /><input id='char_84' type='button' class='letter_russian' value='&#1058;' onmousedown='manageChar(this)' onmouseup='refocus()' /><input id='char_89' type='button' class='letter_russian' value='&#1067;' onmousedown='manageChar(this)' onmouseup='refocus()' /><input id='char_85' type='button' class='letter_russian' value='&#1059;' onmousedown='manageChar(this)' onmouseup='refocus()' /><input id='char_73' type='button' class='letter_russian' value='&#1048;' onmousedown='manageChar(this)' onmouseup='refocus()' /><input id='char_79' type='button' class='letter_russian' value='&#1054;' onmousedown='manageChar(this)' onmouseup='refocus()' /><input id='char_80' type='button' class='letter_russian' value='&#1055;' onmousedown='manageChar(this)' onmouseup='refocus()' /><input id='char_160' type='button' class='letter_russian' value='&#1064;' onmousedown='manageChar(this)' onmouseup='refocus()' /><input id='char_221' type='button' class='letter_russian' value='&#1065;' onmousedown='manageChar(this)' onmouseup='refocus()' /><input id='char_220' type='button' class='letter_russian' value='&#1069;' onmousedown='manageChar(this)' onmouseup='refocus()' /></div><div class='keyboard_russian_row_3'><input id='char_65' type='button' class='letter_russian' value='&#1040;' onmousedown='manageChar(this)' onmouseup='refocus()' /><input id='char_83' type='button' class='letter_russian' value='&#1057;' onmousedown='manageChar(this)' onmouseup='refocus()' /><input id='char_68' type='button' class='letter_russian' value='&#1044;' onmousedown='manageChar(this)' onmouseup='refocus()' /><input id='char_70' type='button' class='letter_russian' value='&#1060;' onmousedown='manageChar(this)' onmouseup='refocus()' /><input id='char_71' type='button' class='letter_russian' value='&#1043;' onmousedown='manageChar(this)' onmouseup='refocus()' /><input id='char_72' type='button' class='letter_russian' value='&#1063;' onmousedown='manageChar(this)' onmouseup='refocus()' /><input id='char_74' type='button' class='letter_russian' value='&#1049;' onmousedown='manageChar(this)' onmouseup='refocus()' /><input id='char_75' type='button' class='letter_russian' value='&#1050;' onmousedown='manageChar(this)' onmouseup='refocus()' /><input id='char_76' type='button' class='letter_russian' value='&#1051;' onmousedown='manageChar(this)' onmouseup='refocus()' /><input id='char_59' type='button' class='letter_russian' value=':' onmousedown='manageChar(this)' onmouseup='refocus()' /><input id='char_222' type='button' class='letter_russian' value='&quot;' onmousedown='manageChar(this)' onmouseup='refocus()' /></div><div class='keyboard_russian_row_4'><input id='char_90' type='button' class='letter_russian' value='&#1047;' onmousedown='manageChar(this)' onmouseup='refocus()' /><input id='char_88' type='button' class='letter_russian' value='&#1061;' onmousedown='manageChar(this)' onmouseup='refocus()' /><input id='char_67' type='button' class='letter_russian' value='&#1062;' onmousedown='manageChar(this)' onmouseup='refocus()' /><input id='char_86' type='button' class='letter_russian' value='&#1046;' onmousedown='manageChar(this)' onmouseup='refocus()' /><input id='char_66' type='button' class='letter_russian' value='&#1041;' onmousedown='manageChar(this)' onmouseup='refocus()' /><input id='char_78' type='button' class='letter_russian' value='&#1053;' onmousedown='manageChar(this)' onmouseup='refocus()' /><input id='char_77' type='button' class='letter_russian' value='&#1052;' onmousedown='manageChar(this)' onmouseup='refocus()' /><input id='char_188' type='button' class='letter_russian' value='<' onmousedown='manageChar(this)' onmouseup='refocus()' /><input id='char_190' type='button' class='letter_russian' value='>' onmousedown='manageChar(this)' onmouseup='refocus()' /><input id='char_191' type='button' class='letter_russian' value='?' onmousedown='manageChar(this)' onmouseup='refocus()' /><input type='button' class='letter_russian' value='@' onmousedown='manageChar(this)' onmouseup='refocus()' /></div></div><div class='keyboard_russian_right'><input type='button' class='letter_text_big_right' value='Backspace' onmousedown='manageBackspace()' onmouseup='refocus()' /><br /><input type='button' class='letter_text_big_right' value='Enter' onmousedown='manageEnter()' onmouseup='refocus()' /><br /><input type='button' class='letter_text_big_right' id='btn_caps' value='Caps Lock' onmousedown='manageCaps()'  onmouseup='refocus()' /><br /><input type='button' class='letter_text_big_right' value='Space Bar' onmousedown='manageSpace()' onmouseup='refocus()' /><br /></div></div>";
	manageLayout(layout)
});
function manageKeyboard(operator) {
	switch(layout) {
		case 0 :
			switch(operator) {
				case 0 :
					document.getElementById("keyboard").innerHTML = standardLayoutLower;
				break;
				case 1 :
					document.getElementById("keyboard").innerHTML = standardLayoutUpper;
				break;
			}
		break;
		case 1 :
			switch(operator) {
				case 0 :
					document.getElementById("keyboard").innerHTML = phoneticLayoutLower;
				break;
				case 1 :
					document.getElementById("keyboard").innerHTML = phoneticLayoutUpper;
				break;
			}
		break;
	}
	characterCase = operator;
	manageCapsBtnLooks();
}
function manageLayout(operator) {
	switch(characterCase) {
		case 0 :
			switch(operator) {
				case 0 :
					document.getElementById("keyboard").innerHTML = standardLayoutLower;
				break;
				case 1 :
					document.getElementById("keyboard").innerHTML = phoneticLayoutLower;
				break;
			}
		break;
		case 1 :
			switch(operator) {
				case 0 :
					document.getElementById("keyboard").innerHTML = standardLayoutUpper;
				break;
				case 1 :
					document.getElementById("keyboard").innerHTML = phoneticLayoutUpper;
				break;
			}
		break;
	}
	layout = operator;
	manageCapsBtnLooks();
	refocus();
}